(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),s=(a(14),a(1)),i=a(2),o=a(4),m=a(3),d=a(5),u=(a(15),a(6));a(16);function v(e){return Math.floor(Math.random()*Math.floor(e))}var h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).onKeyDown=function(e){e.preventDefault(),40===e.which?(a.setState({data:a.goVertical(a.state.data,0)}),a.randomGenTwice()):38===e.which?(a.setState({data:a.goVertical(a.state.data,1)}),a.randomGenTwice()):39===e.which?(a.setState({data:a.goHori(a.state.data,0)}),a.randomGenTwice()):37===e.which&&(a.setState({data:a.goHori(a.state.data,1)}),a.randomGenTwice()),console.log(a.checkGameOver()),console.log(a.state.curScore)},a.checkGameOver=function(){for(var e=a.state.data,t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++){if(t!=e.length-1&&e[t+1][n]==e[t][n])return a.setState({gameOver:!1}),!1;if(n!=e.length-1&&e[t][n+1]==e[t][n])return a.setState({gameOver:!1}),!1}return a.setState({gameOver:!0}),!0},a.goVertical=function(e,t){return e.map((function(e,n){return a.reduceZero(e,t)}))},a.goHori=function(e,t){return e=(e=(e=e[0].map((function(t,a){return e.map((function(e){return e[a]}))}))).map((function(e,n){return a.reduceZero(e,t)})))[0].map((function(t,a){return e.map((function(e){return e[a]}))}))},a.reduceZero=function(e,t){e=e.filter((function(e){return 0!==e}));var n=[];if(0===t){for(var r=e.length-1;r>=0;r--)if(e[r]===e[r-1]){n.push(2*e[r]);var c=a.state.curScore+2*e[r];a.setState({curScore:c}),r--}else n.push(e[r]);e=n.reverse()}else{for(r=0;r<e.length;r++)if(e[r]===e[r+1]){n.push(2*e[r]);var l=a.state.curScore+2*e[r];a.setState({curScore:l}),r++}else n.push(e[r]);e=n}for(var s=4-e.length,i=[];0!=s;)i.push(0),s--;return 0===t?[].concat(i,Object(u.a)(e)):[].concat(Object(u.a)(e),i)},a.restart=function(){a.setState({gameOver:!1,curScore:0,data:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}),a.state.bestScore<a.state.curScore&&a.setState({bestScore:a.state.curScore})},a.state={data:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],gen:!0,curScore:0,bestScore:0,gameOver:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"randomGenTwice",value:function(){for(var e=[],t=[],a=this.state.data,n=0;n<a.length;n++)for(var r=0;r<a[0].length;r++)0===a[n][r]&&(e.push(n),t.push(r));if(0!=e.length)if(1==e.length)a[e[0]][t[0]]=2,this.setState({data:a});else{var c=v(e.length),l=v(e.length);l===c&&(l=v(e.length)),a[e[c]][t[c]]=2,a[e[l]][t[l]]=2,this.setState({data:a})}}},{key:"componentDidMount",value:function(){this.randomGenTwice(),document.addEventListener("keydown",this.onKeyDown.bind(this))}},{key:"randomGenOnce",value:function(){for(var e=[],t=[],a=this.state.data,n=0;n<a.length;n++)for(var r=0;r<a[0].length;r++)console.log(a[n][r]),0===a[n][r]&&(e.push(n),t.push(r));if(0!=e.length){var c=v(e.length);a[e[c]][t[c]]=2,this.setState({data:a}),this.setState({genCount:this.state.genCount+1})}}},{key:"render",value:function(){var e=r.a.createElement("div",{class:"game-message game-over"},r.a.createElement("p",null,"Game over!"),r.a.createElement("div",{class:"lower"},r.a.createElement("a",{class:"retry-button",onClick:this.restart},"Try again")));return r.a.createElement("div",{className:"game-container"},r.a.createElement("div",{class:"scores-container"},r.a.createElement("div",{class:"score-container"},this.state.curScore),r.a.createElement("span",null,"\xa0"),r.a.createElement("div",{class:"best-container"},this.state.bestScore)),this.state.gameOver?e:null,r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"})),r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"})),r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"})),r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}),r.a.createElement("div",{className:"grid-cell"}))),r.a.createElement("div",{className:"tile-container"},this.state.data.map((function(e,t){return r.a.createElement("div",null,e.map((function(e,a){if(0!==e)return r.a.createElement("div",{className:"tile tile-"+e+" tile-position-"+(t+1)+"-"+(a+1)},r.a.createElement("div",{className:"tile-inner"},e))})))})))))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"pg"},r.a.createElement("h1",null,"2048"),r.a.createElement("p",null,"Use keyboard \u2193 \u2191 \u2190 \u2192 to Join the numbers and get to 2048!",r.a.createElement("br",null)," \u7528\u4e0a\u4e0b\u5de6\u53f3\u65b9\u5411\u952e\u5c06\u76f8\u540c\u7684\u6570\u5b57\u878d\u5408\u5728\u4e00\u8d77\u5f97\u52302048\uff01"),r.a.createElement(h,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.1f97b1ca.chunk.js.map